---
import { getCollection, render } from "astro:content";
import BaseLayout from "../../layouts/BaseLayout.astro";
import { Icon } from "astro-icon/components";
import { Image } from "astro:assets";

// Generates a new path for every collection entry
export async function getStaticPaths() {
  const writingEntries = await getCollection("writing");
  return writingEntries.map((entry) => ({
    params: { id: entry.id },
    props: { entry },
  }));
}

const { entry } = Astro.props;
const article = entry.data;
const { Content } = await render(entry);
---

<BaseLayout title={article.title} description={article.description}>
  <div
    class="mx-auto selection:bg-white/60 selection:text-zinc-800 sm:mt-24 sm:max-w-2xl md:max-w-3xl lg:max-w-4xl"
  >
    <a
      href="/writing"
      class="text-muted hover:text-main my-8 flex items-center gap-2 px-4 transition-colors duration-200"
    >
      <Icon name={"lucide:arrow-left"} size={16} />
      <span class="text-sm font-extralight"> Writing </span>
    </a>
    <article
      class="writing prose mx-auto px-4 sm:max-w-2xl md:max-w-3xl lg:max-w-4xl"
    >
      <Image
        src={article.image}
        alt={article.title}
        width={864}
        format="avif"
        loading={"eager"}
        class={"rounded-md outline outline-neutral-800"}
      />
      <h1>
        {article.title}
      </h1>
      <div
        class="info-section mt-1 mb-6 flex flex-col gap-2 sm:flex-row sm:gap-4"
      >
        <p>{article.date.toDateString()}</p>
      </div>
      <Content />
    </article>
  </div>
</BaseLayout>

<style>
  .info-section {
    font-weight: 200;
    color: #7d8084;
    text-decoration: none;
    text-align: left;
  }
</style>
